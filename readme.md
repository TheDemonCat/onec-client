# Образ клиента 1С:Предприятие

[![CI](https://github.com/TheDemonCat/onec-client/actions/workflows/ci.yaml/badge.svg)](https://github.com/TheDemonCat/onec-client/actions/workflows/ci.yaml)

## Сборка 

1. Создать файл `.env` в корне проекта. В качестве примера использовать `.env.example`. В файле должны быть определены переменные:
```
    ONEC_USERNAME=<ПОЛЬЗОВАТЕЛЬ_USERS.1C.V8.RU>
    ONEC_PASSWORD=<ПАРОЛЬ_ОТ_USERS.1C.V8.RU>
    ONEC_VERSION=8.3.16.1659
    HASP_SERVER=<АдресСервераЛицензирования>
```
2. Запустить сборку образа с помощью скрипта

```
    ./make.sh
```

## Запуск клиента

1. Для запуска клиента, после сборки образов, используйте docker-compose

```
docker-compose up -d
```

Дополнительные возможности:

- При запуске клиента можно инициализировать и создание файловой базы, для этого разместите файлы конфигурации в каталоге `./data/cf` или в любом другом, но с обязательным переопределением переменной среды `SOURCE_PATH`

- Временная база создается в контейнере по значению переменной среды `PATH_TMP_BD`, по умолчанию равной `/tmp/build/ib`

- команды `1cestart` и `1cv8` прописаны в PATH и доступна для быстрого доступа 

Доступ к NoVNC осуществляется через браузер по URL http://localhost:6080/vnc.html.